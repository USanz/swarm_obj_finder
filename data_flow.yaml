flow: swarm_obj_finder

vars:
  BASE_DIR_PATH: file:///home/usanz/zs_t3/t3_ws/src/swarm_obj_finder



sources:
  - id : poses_source
    configuration:
      Pose1: rt/robot1/amcl_pose
      Pose2: rt/robot2/amcl_pose
    descriptor : "builtin://zenoh"

operators:
  - id : paths_planner_op
    descriptor : "{{ BASE_DIR_PATH }}/config/nodes_cfg/paths_planner_op.yaml"

  - id : navigator_op
    descriptor : "{{ BASE_DIR_PATH }}/config/nodes_cfg/navigator_op.yaml"

sinks:
  - id : markers_sink
    configuration:
      Markers: rt/debug/markers # no namespaces (global topic /debug/markers in ROS2)
    descriptor : "builtin://zenoh"

  - id : debug_image
    configuration:
      DebugImage: rt/debug/map_div_img # no namespaces (global topic /debug/map_div_img in ROS2)
    descriptor : "builtin://zenoh"
    
  - id : goal_pose_sink
    configuration:
      Waypoint1: rt/robot1/goal_pose
      Waypoint2: rt/robot2/goal_pose
    descriptor : "builtin://zenoh"



links:
- from:
    node : navigator_op
    output : WPRequest
  to:
    node : paths_planner_op
    input : WPRequest
- from:
    node : paths_planner_op
    output : NextWP
  to:
    node : navigator_op
    input : NextWP

- from:
    node : poses_source
    output : Pose1
  to:
    node : navigator_op
    input : Pose1
- from:
    node : poses_source
    output : Pose2
  to:
    node : navigator_op
    input : Pose2

- from:
    node : paths_planner_op
    output : Markers
  to:
    node : markers_sink
    input : Markers
- from:
    node : paths_planner_op
    output : DebugImage
  to:
    node : debug_image
    input : DebugImage

- from:
    node : navigator_op
    output : Waypoint1
  to:
    node : goal_pose_sink
    input : Waypoint1
- from:
    node : navigator_op
    output : Waypoint2
  to:
    node : goal_pose_sink
    input : Waypoint2

mapping:
  paths_planner_op: computer
  navigator_op: computer
